{% extends "base.html" %}
{% load i18n %}
{% load url from future %}
{% block content %}
<div class="container">

  <div class="hero-unit">
    <h1>{% trans "Hello," %} {{ user.username }}!</h1>
  </div>

  <div class="row-fluid">
    <div class="span12">
      <div class="input-prepend">
  <span class="add-on"><i class="icon-search"></i></span><input autocomplete="off" id="input-search-query" type="text" placeholder="{% trans "Find a spot" %}"/>
      </div>
      <div id="neerbee-search">
         Unable to load javascript.
      </div>
    </div>
  </div>

  <br />
  <div class="row-fluid">
    <div class="span12">
  {% if user.likes %}
      <p><i class="icon-heart"></i> {% trans "These are the spots you like:" %}</p>
      <ul class="nav nav-pills">
        {% for like in user.likes %}
        <li><a href="{% url 'spots:spot_profile' like.spot.slug %}"> {{ like.spot.name }} at {{ like.liked_at|date:"SHORT_DATE_FORMAT" }}</a></li>
        {% endfor %}
      </ul>
  {% endif %}
  {% if user.dislikes %}
      <p><i class="icon-remove"></i> {% trans "These are the spots you aren't crazy about:" %}</p>
      <ul class="nav nav-pills">
        {% for dislike in user.dislikes %}
        <li><a href="{% url 'spots:spot_profile' dislike.spot.slug %}">{{ dislike.spot.name }}</a> at {{ dislike.liked_at|date:"SHORT_DATE_FORMAT" }}</li>
        {% endfor %}
      </ul>
  {% endif %}
  {% if not user.likes and not user.dislikes %}
    <p class="muted">{{ user.username }} {% trans "hasn't rated anything yet :(" %}</p>
  {% endif %}
    </div>
  </div>

</div> <!-- /container -->

<script type="text/x-mustache-template" id="result-template">
<a href="{% templatetag openvariable %} spot_url {% templatetag closevariable %}"><strong>{% templatetag openbrace %}{% templatetag openvariable %} name {% templatetag closevariable %}{% templatetag closebrace %}</strong> <span class="muted">{% templatetag openvariable %} address {% templatetag closevariable %} {% templatetag openvariable %} neighbourhood {% templatetag closevariable %}</span></a>
</script>

<!-- Page Specific Javascript -->
<script src="{{ STATIC_URL }}js/bootstrap.js"></script>
<script src="{{ STATIC_URL }}js/underscore.js"></script>
<script src="{{ STATIC_URL }}js/backbone.js"></script>
<script src="{{ STATIC_URL }}js/mustache.js"></script>
<script src="{{ STATIC_URL }}js/neerbee-search.js"></script>
<script>$(function() { Neerbee.boot($('#neerbee-search')); });</script>
{% endblock %}
